{% extends "base.html" %}
{% block head %}
{% block title %}<title>VR Pub</title>{% endblock title %}
(( super() ))
<script src="http://static.opentok.com/webrtc/v2.0/js/TB.min.js" ></script>
{% endblock head %}
{% block content %}
<div class="row">
    <div class="small-12 columns">
        <h1>VR Pub</h1>
    </div>
</div>
{% block tokbox_playback %}{% endblock tokbox_playback %}
<div class="row">
    <div class="small-6 columns">
        <div class="panel">
            <h2>Publishing...<h2>
        </div>
    </div>
</div>

<script type="text/javascript">
                var apiKey    = "44596572";
                var sessionId = "1_MX40NDU5NjU3Mn5-VGh1IEphbiAwOSAwOTo0NTo0MSBQU1QgMjAxNH4wLjI1MTU4Njc0fg";
                var token     = "T1==cGFydG5lcl9pZD00NDU5NjU3MiZzZGtfdmVyc2lvbj10YnJ1YnktdGJyYi12MC45MS4yMDExLTAyLTE3JnNpZz0wOTMzNGYyZThiMTkzMDExZjI4NDk0ZWRjMzQ5MjNiNzkzNThmY2JkOnJvbGU9cHVibGlzaGVyJnNlc3Npb25faWQ9MV9NWDQwTkRVNU5qVTNNbjUtVkdoMUlFcGhiaUF3T1NBd09UbzBOVG8wTVNCUVUxUWdNakF4Tkg0d0xqSTFNVFU0TmpjMGZnJmNyZWF0ZV90aW1lPTEzODkyODk1Njkmbm9uY2U9MC4yNDI5NDQ2MDUxNTczMjM2MyZleHBpcmVfdGltZT0xMzkxODgxNTczJmNvbm5lY3Rpb25fZGF0YT0=";
                
                function sessionConnectedHandler (event) {
                    session.publish(publisher);
                }
                 
                var publisherProperties = {width: 480, height:360, name:"VR stream"};
                var publisher = TB.initPublisher(apiKey, {% block playback %}null{% endblock playback %}, publisherProperties);
                var session = TB.initSession(sessionId);
                 
                session.connect(apiKey, token);
                session.addEventListener("sessionConnected", 
                                         sessionConnectedHandler);
            </script>
{% endblock content %}
